<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaniniGraph Simplifi√© - Symboles SVG Coh√©rents</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
        }

        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            text-align: center;
            opacity: 0.8;
            margin-bottom: 30px;
        }

        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
        }

        .primitive-btn {
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .primitive-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .linearize-btn {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
        }

        .clear-btn {
            background: linear-gradient(45deg, #fa7268, #ff7675);
            color: white;
        }

        .speak-btn {
            background: linear-gradient(45deg, #a29bfe, #6c5ce7);
            color: white;
        }

        .demo-btn {
            background: linear-gradient(45deg, #fd79a8, #fdcb6e);
            color: white;
        }

        .canvas-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 400px;
            position: relative;
        }

        #canvas {
            width: 100%;
            height: 400px;
            border: 2px dashed #ddd;
            border-radius: 10px;
            background: #f8f9fa;
        }

        .concept {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .concept:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        .concept text {
            font-size: 20px;
            text-anchor: middle;
            dominant-baseline: middle;
            font-weight: bold;
        }

        .relation-line {
            stroke-width: 3;
            stroke-linecap: round;
            opacity: 0.7;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .pulsing {
            animation: pulse 2s infinite;
        }

        .linear-display {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .phoneme {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-family: monospace;
            font-size: 18px;
            font-weight: bold;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ PaniniGraph Simplifi√©</h1>
        <p class="subtitle">Symboles coh√©rents - Une modalit√©, clart√© maximale</p>
        
        <div class="instructions">
            <h3>üéØ Syst√®me Unifi√© Simplifi√©</h3>
            <p>1. <strong>Symboles homog√®nes</strong> : Formes g√©om√©triques pures pour une coh√©rence parfaite</p>
            <p>2. <strong>Une seule repr√©sentation</strong> : Fini la confusion entre modalit√©s multiples</p>
            <p>3. <strong>S√©mantique imm√©diate</strong> : Chaque forme √©voque directement son concept</p>
            <p>4. Placez les primitives puis "üìè Lin√©ariser" pour voir l'animation</p>
        </div>

        <div class="toolbar">
            <div>
                <strong>Primitives DhƒÅtu IPA (Scientifique) :</strong><br>
                <button class="primitive-btn" onclick="addPrimitive('existence')" title="[pi] - Bilabial sourd + ferm√©e ant√©rieure">
                    <span style="font-size: 18px;">‚¨¢</span> [pi] EXISTENCE
                </button>
                <button class="primitive-btn" onclick="addPrimitive('transformation')" title="[tu] - Dental sourd + ferm√©e post√©rieure">
                    <span style="font-size: 18px;">‚ü≤</span> [tu] TRANSFORMATION
                </button>
                <button class="primitive-btn" onclick="addPrimitive('structure')" title="[ka] - V√©laire sourd + ouverte centrale">
                    <span style="font-size: 18px;">‚ñ¶</span> [ka] STRUCTURE
                </button>
                <button class="primitive-btn" onclick="addPrimitive('flux')" title="[ba] - Bilabial sonore + ouverte centrale">
                    <span style="font-size: 18px;">‚âà</span> [ba] FLUX
                </button>
                <button class="primitive-btn" onclick="addPrimitive('liaison')" title="[mu] - Bilabial nasal + ferm√©e post√©rieure">
                    <span style="font-size: 18px;">‚óé</span> [mu] LIAISON
                </button>
                <button class="primitive-btn" onclick="addPrimitive('negation')" title="[ni] - Dental nasal + ferm√©e ant√©rieure">
                    <span style="font-size: 18px;">‚óØ</span> [ni] N√âGATION
                </button>
                <button class="primitive-btn" onclick="addPrimitive('iteration')" title="[da] - Dental sonore + ouverte centrale">
                    <span style="font-size: 18px;">‚ãØ</span> [da] IT√âRATION
                </button>
                <button class="primitive-btn" onclick="addPrimitive('reflection')" title="[…°i] - V√©laire sonore + ferm√©e ant√©rieure">
                    <span style="font-size: 18px;">‚ß®</span> […°i] R√âFLEXION
                </button>
                <button class="primitive-btn" onclick="addPrimitive('unification')" title="[bu] - Bilabial sonore + ferm√©e post√©rieure">
                    <span style="font-size: 18px;">‚óÜ</span> UNIFICATION
                </button>
            </div>
        </div>

        <div class="controls">
            <button class="control-btn linearize-btn" onclick="linearizeGraph()">üìè Lin√©ariser</button>
            <button class="control-btn clear-btn" onclick="clearCanvas()">üóëÔ∏è Effacer</button>
            <button class="control-btn speak-btn" onclick="speakPhonemes()">üîä Prononcer</button>
            <button class="control-btn demo-btn" onclick="loadDemo()">üé¨ D√©mo</button>
        </div>

        <div class="canvas-container">
            <svg id="canvas" viewBox="0 0 800 400">
                <!-- Zone de placement des concepts -->
            </svg>
        </div>

        <div class="linear-display" id="linearDisplay">
            <em>Placez des concepts puis cliquez "üìè Lin√©ariser" pour voir la s√©quence phon√©mique</em>
        </div>
    </div>

    <script>
        // Syst√®me IPA Scientifique - Alphabet Phon√©tique International
        const primitiveSystem = {
            'existence': {
                phoneme: '[pi]',
                symbol: "‚¨¢",
                description: "Entit√© pr√©cise, bilabial sourd + ferm√©e ant√©rieure",
                color: '#e74c3c'
            },
            'transformation': {
                phoneme: '[tu]',
                symbol: "‚ü≤",
                description: "Processus continu, dental sourd + ferm√©e post√©rieure",
                color: '#3498db'
            },
            'structure': {
                phoneme: '[ka]',
                symbol: "‚ñ¶",
                description: "Architecture stable, v√©laire sourd + ouverte centrale",
                color: '#2ecc71'
            },
            'flux': {
                phoneme: '[ba]',
                symbol: "‚âà",
                description: "√âcoulement libre, bilabial sonore + ouverte centrale",
                color: '#f39c12'
            },
            'liaison': {
                phoneme: '[mu]',
                symbol: "‚óé",
                description: "Centre focal, bilabial nasal + ferm√©e post√©rieure",
                color: '#9b59b6'
            },
            'negation': {
                phoneme: '[ni]',
                symbol: "‚óØ",
                description: "Unit√© compl√®te, dental nasal + ferm√©e ant√©rieure",
                color: '#95a5a6'
            },
            'iteration': {
                phoneme: '[da]',
                symbol: "‚ãØ",
                description: "Connexion directe, dental sonore + ouverte centrale",
                color: '#e67e22'
            },
            'reflection': {
                phoneme: '[…°i]',
                symbol: "‚ß®",
                description: "Interaction dynamique, v√©laire sonore + ferm√©e ant√©rieure",
                color: '#34495e'
            },
            'unification': {
                phoneme: '[bu]',
                symbol: "‚óÜ",
                description: "Synth√®se compl√®te, bilabial sonore + ferm√©e post√©rieure",
                color: '#f1c40f'
            }
        };

        let concepts = [];
        let isLinearized = false;

        function addPrimitive(type) {
            if (isLinearized) {
                alert('Effacez d\'abord pour ajouter de nouveaux concepts');
                return;
            }

            const canvas = document.getElementById('canvas');
            const rect = canvas.getBoundingClientRect();
            
            // Position al√©atoire dans le canvas
            const x = Math.random() * 700 + 50;
            const y = Math.random() * 300 + 50;
            
            const primitive = primitiveSystem[type];
            const conceptId = `concept-${Date.now()}`;
            
            // Cr√©er l'√©l√©ment SVG
            const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            group.setAttribute('class', 'concept');
            group.setAttribute('id', conceptId);
            group.setAttribute('transform', `translate(${x}, ${y})`);
            group.setAttribute('data-type', type);
            
            // Cercle de fond
            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            circle.setAttribute('cx', '0');
            circle.setAttribute('cy', '0');
            circle.setAttribute('r', '25');
            circle.setAttribute('fill', primitive.color);
            circle.setAttribute('stroke', 'white');
            circle.setAttribute('stroke-width', '2');
            
            // Symbole
            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            text.setAttribute('x', '0');
            text.setAttribute('y', '5');
            text.setAttribute('fill', 'white');
            text.setAttribute('font-size', '20');
            text.setAttribute('text-anchor', 'middle');
            text.setAttribute('dominant-baseline', 'middle');
            text.textContent = primitive.symbol;
            
            group.appendChild(circle);
            group.appendChild(text);
            canvas.appendChild(group);
            
            // Ajouter √† la liste
            concepts.push({
                id: conceptId,
                type: type,
                x: x,
                y: y,
                element: group
            });
            
            // Animation d'apparition
            gsap.from(group, {
                scale: 0,
                rotation: 360,
                duration: 0.5,
                ease: "back.out(1.7)"
            });
        }

        function clearCanvas() {
            const canvas = document.getElementById('canvas');
            concepts.forEach(concept => {
                canvas.removeChild(concept.element);
            });
            concepts = [];
            isLinearized = false;
            
            document.getElementById('linearDisplay').innerHTML = 
                '<em>Placez des concepts puis cliquez "üìè Lin√©ariser" pour voir la s√©quence phon√©mique</em>';
        }

        function linearizeGraph() {
            if (concepts.length === 0) {
                alert('Ajoutez des concepts d\'abord !');
                return;
            }

            isLinearized = true;

            // Trier les concepts par position X (de gauche √† droite)
            const sortedConcepts = [...concepts].sort((a, b) => a.x - b.x);
            
            // Animation vers une ligne horizontale
            sortedConcepts.forEach((concept, index) => {
                const targetX = 100 + index * 80;
                const targetY = 200;
                
                gsap.to(concept.element, {
                    attr: { transform: `translate(${targetX}, ${targetY})` },
                    duration: 1,
                    delay: index * 0.1,
                    ease: "power2.inOut"
                });
                
                concept.x = targetX;
                concept.y = targetY;
            });

            // Afficher la s√©quence phon√©mique
            setTimeout(() => {
                const phonemes = sortedConcepts.map(concept => {
                    const primitive = primitiveSystem[concept.type];
                    return `<span class="phoneme" style="background-color: ${primitive.color};">${primitive.phoneme}</span>`;
                }).join('');
                
                document.getElementById('linearDisplay').innerHTML = 
                    `<strong>S√©quence Phon√©mique :</strong> ${phonemes}`;
            }, 1500);
        }

        function speakPhonemes() {
            if (concepts.length === 0) {
                alert('Aucun concept √† prononcer !');
                return;
            }

            const sortedConcepts = [...concepts].sort((a, b) => a.x - b.x);
            const phonemes = sortedConcepts.map(concept => 
                primitiveSystem[concept.type].phoneme.replace(/[\/]/g, '')
            ).join(' ');

            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(phonemes);
                utterance.rate = 0.7;
                utterance.pitch = 1.2;
                speechSynthesis.speak(utterance);
            } else {
                alert(`Phon√®mes : ${phonemes}`);
            }
        }

        function loadDemo() {
            clearCanvas();
            
            // Charger une d√©monstration avec quelques concepts
            setTimeout(() => addPrimitive('existence'), 200);
            setTimeout(() => addPrimitive('transformation'), 400);
            setTimeout(() => addPrimitive('liaison'), 600);
            setTimeout(() => addPrimitive('unification'), 800);
        }

        // Clic pour d√©placer les concepts
        document.getElementById('canvas').addEventListener('click', function(e) {
            if (isLinearized) return;
            
            const rect = e.target.getBoundingClientRect();
            const canvasRect = this.getBoundingClientRect();
            const x = e.clientX - canvasRect.left;
            const y = e.clientY - canvasRect.top;
            
            // Trouver le concept le plus proche pour le d√©placer
            concepts.forEach(concept => {
                const distance = Math.sqrt(
                    Math.pow(concept.x - x, 2) + Math.pow(concept.y - y, 2)
                );
                
                if (distance < 50) {
                    concept.x = x;
                    concept.y = y;
                    
                    gsap.to(concept.element, {
                        attr: { transform: `translate(${x}, ${y})` },
                        duration: 0.3,
                        ease: "power2.out"
                    });
                }
            });
        });
    </script>
</body>
</html>
