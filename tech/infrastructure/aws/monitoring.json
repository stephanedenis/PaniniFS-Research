{
  "prometheus": {
    "scrape_configs": [
      {
        "job_name": "dhatu-processing",
        "static_configs": [
          {
            "targets": [
              "dhatu-cpu-compute:8080"
            ]
          }
        ],
        "metrics_path": "/metrics",
        "scrape_interval": "30s"
      }
    ]
  },
  "grafana": {
    "dashboards": {
      "dhatu_processing_overview": {
        "title": "Dh\u0101tu Processing Overview",
        "panels": [
          {
            "title": "Texts Processed per Second",
            "type": "graph",
            "targets": [
              {
                "expr": "rate(dhatu_texts_processed_total[5m])"
              }
            ]
          },
          {
            "title": "Memory Usage",
            "type": "graph",
            "targets": [
              {
                "expr": "process_resident_memory_bytes"
              }
            ]
          },
          {
            "title": "CPU Utilization",
            "type": "graph",
            "targets": [
              {
                "expr": "rate(process_cpu_seconds_total[5m])"
              }
            ]
          }
        ]
      }
    }
  },
  "alerts": {
    "groups": [
      {
        "name": "dhatu_processing",
        "rules": [
          {
            "alert": "HighCPUUsage",
            "expr": "rate(process_cpu_seconds_total[5m]) > 0.8",
            "for": "5m",
            "labels": {
              "severity": "warning"
            },
            "annotations": {
              "summary": "High CPU usage detected",
              "description": "CPU usage is above 80% for more than 5 minutes"
            }
          },
          {
            "alert": "HighMemoryUsage",
            "expr": "process_resident_memory_bytes > 4000000000",
            "for": "2m",
            "labels": {
              "severity": "warning"
            },
            "annotations": {
              "summary": "High memory usage detected",
              "description": "Memory usage is above 4GB"
            }
          },
          {
            "alert": "LowThroughput",
            "expr": "rate(dhatu_texts_processed_total[5m]) < 100",
            "for": "10m",
            "labels": {
              "severity": "critical"
            },
            "annotations": {
              "summary": "Low processing throughput",
              "description": "Processing fewer than 100 texts per second"
            }
          }
        ]
      }
    ]
  }
}